<?xml version='1.0' ?>

<!-- 
/********************************************************************************
 *   
 *	Copyright (c) 2016 - 2017 MAX Hypermarket, Inc    All Rights Reserved.
 *	
 *
 *
 *	Rev	1.0 	Dec 20, 2016		Mansi Goel		Changes for Gift Card FES	
 *
 ********************************************************************************/
 -->
<!DOCTYPE SERVICE SYSTEM "classpath://oracle/retail/stores/foundation/tour/dtd/tourguide.dtd">

<SERVICE
    name="giftcard"
    package="oracle.retail.stores.pos.services.giftcard"
    tourcam="OFF">
    <CARGO class="MAXGiftCardCargo" package="max.retail.stores.pos.services.giftcard" />
    <SERVICECODE>
        <LETTER name="Undo"/>
        <LETTER name="Next"/>
        <LETTER name="Success"/>
        <LETTER name="Failure"/>
        <LETTER name="Retry"/>
        <LETTER name="Issue"/>
        <LETTER name="Reload"/>
        <LETTER name="ExitReload"/>
        <LETTER name="GiftCard"/>  
        <LETTER name="GiftCert"/>              
        <LETTER name="Continue"/>
        <LETTER name="RequestActivation"/>
        <LETTER name="Cancel"/>
        <LETTER name="Ok"/>
        <LETTER name="Balance"/>
        <LETTER name="GoIssue"/>
        <LETTER name="QCBatchClose"/>
	 	<LETTER name="UndoGift"/>
         

        <!-- SITEACTION class="SelectGiftCardOptionSite"/-->
        <SITEACTION class="MAXSelectGiftCardOptionSite" package="max.retail.stores.pos.services.giftcard"/>
        
        <SHUTTLE class="GiftCardIssueLaunchShuttle" package="oracle.retail.stores.pos.services.giftcard"/>
        <SHUTTLE class="GiftCardIssueReturnShuttle" package="oracle.retail.stores.pos.services.giftcard"/>
        <SHUTTLE class="GiftCardReloadLaunchShuttle" package="oracle.retail.stores.pos.services.giftcard"/>
        <SHUTTLE class="GiftCardReloadReturnShuttle" package="oracle.retail.stores.pos.services.giftcard"/>
        <SHUTTLE class="MAXGiftCardIssueLaunchShuttle" package="max.retail.stores.pos.services.giftcard"/>
        <LANEACTION class="MAXGiftCardBalanceCardNumEnteredAisle" package="max.retail.stores.pos.services.giftcard.reload"/>        
        <LANEACTION class="MAXGiftCardIssuedCountAisle" package="max.retail.stores.pos.services.giftcard"/>
        <LANEACTION class="MAXGiftCardBatchCloseAisle" package="max.retail.stores.pos.services.giftcard"/>
        <LANEACTION class="MAXPrintGiftCardBalanceAisle" package="max.retail.stores.pos.services.giftcard"/>        
        <SITEACTION class="MAXGetCardNumForGiftCardReloadSite" package="max.retail.stores.pos.services.giftcard.reload"/>
           
    </SERVICECODE>
    <MAP>
        <REGION region="SERVICE" startsite="SelectGiftCardOption">
            <SITE name="SelectGiftCardOption" siteaction="MAXSelectGiftCardOptionSite">
            <AISLE
                    name="GiftCardCountIssues"
                    letter="Issue"
                    laneaction="MAXGiftCardIssuedCountAisle">
                     <COMMENT>
                        This Aisle is used to check the count of Total GiftCard issued in 
                        a Transaction.
                    </COMMENT>
                </AISLE>
                <AISLE
                    name="GiftCardBatchClose"
                    letter="QCBatchClose"
                    laneaction="MAXGiftCardBatchCloseAisle">
                    <COMMENT>
                        This Aisle is used to check the count of Total GiftCard issued in 
                        a Transaction.
                    </COMMENT>
                </AISLE>
                 <ROAD
                    name="GiftCardCountFailed"
                    letter="NoIssue"
                    destination="SelectGiftCardOption"
                    tape="ADVANCE" record="OFF" index="OFF">
                </ROAD>
          
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    destination="Final"
                    tape="ADVANCE" record="OFF" index="OFF">
                </ROAD>
                <ROAD
                    name="UndoGIftSelected"
                    letter="UndoGift"
                    destination="Final"
                    tape="ADVANCE" record="OFF" index="OFF">
                </ROAD>
                <ROAD
                    name="IssueSelected"
                    letter="GoIssue"
                  	destination="GiftCardIssue"
                    tape="ADVANCE" record="OFF" index="OFF">
                </ROAD>
                <!-- Changes for Rev 1.0 : Starts -->
                <ROAD
                    name="ReloadSelected"
                    letter="Reload"
                    destination="GiftCardReloadStation"
                    tape="ADVANCE" record="OFF" index="OFF">
                </ROAD>
                <!-- Changes for Rev 1.0 : Ends -->
                <ROAD
                    name="BalanceInquirySelected"
                    letter="Balance"
                    destination="GetGiftCardBalance"
                    tape="ADVANCE" record="OFF" index="OFF">
                 </ROAD>
                 
            </SITE>
           
            <SITE name="GetGiftCardBalance" siteaction="MAXGetCardNumForGiftCardReloadSite">
                <COMMENT>
                    This site displays the GET_CARD_NUM_FOR_GIFT_CARD_RELOAD from GiftCardNumReload to ask
                    the user to enter gift card number
                    item.
                </COMMENT>
                <AISLE
                    name="GiftCardNumberEntered"
                    letter="Next"
                    laneaction="MAXGiftCardBalanceCardNumEnteredAisle">
                    <COMMENT>
                        This aisle is traversed after the user entered the
                        gift card information. It adds the gift card to the
                        item list in the cargo.
                    </COMMENT>
                </AISLE>
                <AISLE
                    name="GiftCardRecipt"
                    letter="Yes"
                    laneaction="MAXPrintGiftCardBalanceAisle">
                    <COMMENT>
                        This aisle is traversed after the user entered the
                        gift card information. It adds the gift card to the
                        item list in the cargo.
                    </COMMENT>
                </AISLE>
				<ROAD
                    name="InvalidGiftCardNumber"
                    letter="InvalidCardNumber"
                    destination="GetGiftCardBalance"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                    <COMMENT>
                        The gift card MAG swipe was invalid or the user
                        entered an invalid number. Allow user to
                        re-swipe or re-enter the gift card number.
                    </COMMENT>
                </ROAD>                
                <ROAD
                    name="GiftCardItemAdded"
                    letter="Continue"
                    destination="SelectGiftCardOption"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    destination="SelectGiftCardOption"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>   
                 <ROAD
                    name="CancelSelected"
                    letter="Cancel"
                    destination="SelectGiftCardOption"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>          
            </SITE>
         <!-- Changes for Rev 1.0 : Starts -->
         <STATION
                name="GiftCardReloadStation"
                servicename="giftcard.reload.reload"
                targettier="APPLICATIONTIER"
                launchshuttle="GiftCardReloadLaunchShuttle"
                returnshuttle="GiftCardReloadReturnShuttle">
         <!-- Changes for Rev 1.0 : Ends -->
                <ROAD
                    name="GiftCardItemAdded"
                    letter="Continue"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GiftCardItemAdded"
                    letter="Ok"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="RequestActivation"
                    letter="RequestActivation"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelSelected"
                    letter="Cancel"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
         <STATION
                name="GiftCardIssue"
                servicename="giftcard.issue.issue"
                targettier="APPLICATIONTIER"
                launchshuttle="MAXGiftCardIssueLaunchShuttle"
                returnshuttle="GiftCardIssueReturnShuttle">
                <ROAD
                    name="GiftCardItemAdded"
                    letter="Continue"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="RequestActivation"
                    letter="RequestActivation"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelSelected"
                    letter="Cancel"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="InvalidCardCastNumber"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <SYSTEMSITE name="Final" action="RETURN"/>
        </REGION>
    </MAP>
</SERVICE>
