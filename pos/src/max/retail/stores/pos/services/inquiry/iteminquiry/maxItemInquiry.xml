<?xml version='1.0' ?>
<!--
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  
  Rev. 1.0 		Ashish Yadav		01/02/2013		Change for Item Inquiry
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-->

<!DOCTYPE SERVICE SYSTEM "classpath://oracle/retail/stores/foundation/tour/dtd/tourguide.dtd">

<SERVICE
    name="ItemInquiry"
    package="oracle.retail.stores.pos.services.inquiry.iteminquiry"
    tourcam="ON">
    <COMMENT >
        This service implements the Item Inquiry Package
        of the POS Component Set
    </COMMENT>
    <CARGO  class="MAXItemInquiryCargo" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
    <SERVICECODE >
        <!-- Letter -->
        <LETTER name="Add"/>
        <LETTER name="Alterations"/>
        <LETTER name="Cancel"/>
        <LETTER name="Continue"/>
        <LETTER name="Detail"/>
        <LETTER name="Done"/>
        <LETTER name="Failure"/>
        <LETTER name="GiftCard"/>
        <LETTER name="Invalid"/>
        <LETTER name="Loop"/>
        <LETTER name="Next"/>
        <LETTER name="No"/>
        <LETTER name="Retry"/>
        <LETTER name="RecommendedItemSearch"/>
        <LETTER name="Success"/>
        <LETTER name="Undo"/>
        <LETTER name="GiftCode"/>
        <LETTER name="Search"/>
        <LETTER name="AdvanceSearch"/>
        <LETTER name="Skip"/>
        <LETTER name="Inventory"/>
        <LETTER name="RequestTicket"/>
        <LETTER name="AUTO"/>
        <LETTER name="CROSSSELL"/>
        <LETTER name="UPSELL"/>
        <LETTER name="SUBSTITUTE"/>
        <LETTER name="ItemSearch"/>
        <LETTER name="Add" />
 
        <!-- Signals -->
        <SIGNAL  class="IsPriceInquiryToBeInvokedSignal"/>
        <SIGNAL  class="IsPriceInquiryNotToBeInvokedSignal"/>
        <SIGNAL  class="IsRecommendedItemDisplaySignal"/>
        <SIGNAL class="IsItemNotToBeAddedSignal" />
		<SIGNAL class="MAXIsItemToBeAddedSignal" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
		<SIGNAL class="MAXIsRedirectToSellItemSignal"  package="max.retail.stores.pos.services.inquiry.iteminquiry"/> 
		<SIGNAL class="MAXIsNotRedirectToSellItemSignal"  package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
        
        <!-- Sites -->
        <SITEACTION class="PriceInquirySite"/>
        <SITEACTION class="AddItemSite"/>
        <SITEACTION class="CheckItemTypeSite"/>
        <SITEACTION class="CheckPriceEntrySite" package="oracle.retail.stores.pos.services.common"/>
        <SITEACTION class="CheckUnitOfMeasureSite"/>
        <SITEACTION class="MAXShowItemListSite" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
        <SITEACTION class="MAXShowItemSite" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
        <SITEACTION class="DisplayItemSite"/>
        <SITEACTION class="MAXValidateItemInfoSite" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
        <SITEACTION class="AdvanceSearchSite"/>
        <SITEACTION class="GetAgeRestrictionDOBSite"/>
        <SITEACTION class="ValidateAgeRestrictedDOBSite"/>
        <SITEACTION class="ItemSelectedSite"/>
        <SITEACTION class="DisplayAutoRelatedItemSite"/>
        <SITEACTION class="DisplayCrossSellRelatedItemSite"/>
        <SITEACTION class="DisplayUpsellRelatedItemSite"/>
        <SITEACTION class="DisplaySubstituteRelatedItemSite"/>
        <SITEACTION class="SearchItemInLocalOrWebStoreSite"/>
        <SITEACTION class="ShowFilterItemSite"/>
        <SITEACTION class="UndoDisplayItemActionSite"/>
        <SITEACTION class="UndoItemListActionSite"/>

        <!-- Lanes -->
        <LANEACTION class="GiftCardAddLetterConversionAisle"/>
        <LANEACTION class="InquiryDoneAisle"/>
        <LANEACTION class="InvalidDataFoundAisle"/>
        <LANEACTION class="MAXInvalidDataFoundAisle" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
        <LANEACTION class="ItemDetailDisplayedRoad"/>
        <LANEACTION class="MAXItemInfoEnteredRoad" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
        <LANEACTION class="ItemInfoEnteredRoad"/>
        <LANEACTION class="LocalSearchItemInfoEnteredRoad"/>
        <LANEACTION class="PriceEnteredItemInquiryAisle"/>
        <LANEACTION class="ResetCargoRoad"/>
        <LANEACTION class="UnitOfMeasureEnteredAisle"/>
        <LANEACTION class="CreateTransactionRoad"/>
        <LANEACTION class="RequestTicketAisle"/>
        <LANEACTION class="GetItemRoad"/>
        <LANEACTION class="LabelBatchTicketAisle" package="oracle.retail.stores.pos.services.inquiry.iteminquiry.itemcheck"/>
        <LANEACTION class="SetSearchInWebStoreRoad"/>
        <LANEACTION class="FilterSearchResultsRoad"/>
        <LANEACTION class="PopResultSetsOutRoad"/>
        <SITEACTION class="RecommendedItemSearchRoad"/>
        <LANEACTION class="DataBaseErrorFoundAisle" />
        <LANEACTION class="MAXAnotherItemNumberEnteredRoad" package="max.retail.stores.pos.services.inquiry.iteminquiry"/>
        <LANEACTION class="AddItemRoad" />

        <!-- Shuttles -->
        <SHUTTLE class="AlterationsLaunchShuttle"/>
        <SHUTTLE class="AlterationsReturnShuttle"/>
        <SHUTTLE class="GiftCardIssueLaunchShuttle"/>
        <SHUTTLE class="GiftCardIssueReturnShuttle"/>
        <SHUTTLE class="InventoryInquiryLaunchShuttle" package="oracle.retail.stores.pos.services.inquiry.iteminquiry"/>
        <SHUTTLE class="InventoryInquiryReturnShuttle" package="oracle.retail.stores.pos.services.inquiry.iteminquiry"/>
    </SERVICECODE>
    <MAP >
        <REGION  region="SERVICE" startsite="PriceInquiry">
            <SITE  name="PriceInquiry" siteaction="PriceInquirySite">
                <ROAD
                    name="ItemInquiryUndo"
                    letter="Undo"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="ItemInfoEntered"
                    letter="Next"
                    laneaction="MAXItemInfoEnteredRoad"
                    destination="ValidateItemInfo"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="EnterItemInfoCancel"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="EnterGiftCode"
                    letter="GiftCode"
                    destination="GiftCodeStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="EnterAdvanceSearch"
                    letter="AdvanceSearch"
                    destination="AdvanceSearch"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="FetchSelectedRecommendedItem"
                    letter="RecommendedItemSearch"
                    laneaction="RecommendedItemSearchRoad"
                    destination="SearchItemInLocalOrWebStore"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
            </SITE>
            <SITE name="AdvanceSearch" siteaction="AdvanceSearchSite">
                <ROAD
                    name="ItemInfoEntered"
                    letter="Next"
                    laneaction="MAXItemInfoEnteredRoad"
                    destination="ValidateItemInfo"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="CancelSelected"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"    record="OFF" index="OFF"
                    destination="Final">
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"    record="OFF" index="OFF"
                    destination="PriceInquiry">
                    <LIGHT  signal="IsPriceInquiryToBeInvokedSignal"/>
                </ROAD>
               <ROAD
                    name="UndoToSaleSelected"
                    letter="Undo"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"    record="OFF" index="OFF"
                    destination="Final">
                    <LIGHT  signal="IsPriceInquiryNotToBeInvokedSignal"/>
                </ROAD>
                <ROAD
                    name="Search"
                    letter="ItemSearch"
                    destination="ShowItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="ValidateItemInfo" siteaction="MAXValidateItemInfoSite">
                <AISLE
                    name="InvalidDataFound"
                    letter="Invalid"
                    laneaction="InvalidDataFoundAisle">
                </AISLE>
                <AISLE name="DataBaseErrorFound" letter="DbError"
					laneaction="DataBaseErrorFoundAisle">
				</AISLE>
				<ROAD name="OneItemFound" letter="Success" destination="ShowItem"
					tape="ADVANCE" record="OFF" index="OFF">
				</ROAD>
                <!-- <ROAD
                    name="ItemInfoReentered"
                    letter="Retry"
                    laneaction="ResetCargoRoad"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD> -->
                <ROAD
                    name="ItemInfoReentered"
                    letter="Next"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD name="MultipleItemsFound" letter="Next" destination="ShowItemList"
					tape="ADVANCE" record="OFF" index="OFF">
				</ROAD>
               <ROAD
                    name="SearchItem"
                    letter="Search"
                    destination="SearchItemInLocalOrWebStore"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD name="InvalidInfoAdvanceInquiry" letter="Cancel" laneaction="ResetCargoRoad"
					destination="PriceInquiry" tape="ADVANCE" record="OFF" index="OFF">
				</ROAD>
				<!-- <ROAD name="InvalidInfoAdvanceSearch" letter="Undo" laneaction="ResetCargoRoad"
					destination="PriceInquiry" tape="ADVANCE" record="OFF" index="OFF">
				</ROAD> -->
				<!-- <ROAD name="InvalidSearchInfo" letter="Clear" laneaction="ResetCargoRoad"
					destination="PriceInquiry" tape="ADVANCE" record="OFF" index="OFF">
				</ROAD> -->
            </SITE>
            <SITE  name="SearchItemInLocalOrWebStore" siteaction="SearchItemInLocalOrWebStoreSite">
                <ROAD
                    name="SearchInWebStore"
                    letter="Search"
                    laneaction="SetSearchInWebStoreRoad"
                    destination="SearchItemInLocalOrWebStore"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="ItemInfoReentered"
                    letter="Retry"
                    laneaction="ResetCargoRoad"
                    destination="PriceInquiry"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="OneItemFound"
                    letter="Success"
                    destination="DisplayItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="MultipleItemsFound"
                    letter="Next"
                    destination="ShowItemList"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelSelected"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"
                    record="OFF" index="OFF"
                    destination="Final">
                </ROAD>
                <ROAD
                    name="UndoSelectedForRecommendedItem"
                    letter="Undo"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"
                    record="OFF" index="OFF"
                    destination="Final">
                    <LIGHT  signal="IsRecommendedItemDisplaySignal"/>
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    laneaction="ResetCargoRoad"
                    tape="REWIND"
                    record="OFF" index="OFF"
                    destination="LastIndexed">
                    <LIGHT  signal="IsRecommendedItemDisplaySignal" negate="Y"/>
                </ROAD>
            </SITE>
            <SITE  name="ShowItemList" siteaction="MAXShowItemListSite">
                <AISLE name="LabelBatchRequest"
                       letter="RequestTicket"
                       laneaction="LabelBatchTicketAisle">
                </AISLE>
                <ROAD name="ItemToBeAdded" letter="Add" laneaction="AddItemRoad"
					destination="GetAgeRestrictedDOB" tape="ADVANCE" record="OFF"
					index="OFF">
					<LIGHT signal="MAXIsItemToBeAddedSignal" />
				</ROAD>
				<!-- <ROAD name="ItemNotToBeAdded" letter="Add" destination="MultipleMRPStation"
					tape="ADVANCE" record="OFF" index="OFF">
					<LIGHT signal="IsItemNotToBeAddedSignal" />
				</ROAD> -->
                <!-- <ROAD
                    name="GetItemToBeAdded"
                    letter="Add"
                    laneaction="GetItemRoad"
                    destination="ItemSelected"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD> -->
                <ROAD
                    name="FinishInquiry"
                    letter="Next"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ItemDetailDisplayed"
                    letter="Detail"
                    laneaction="ItemDetailDisplayedRoad"
                    destination="DisplayItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ShowListItemUndo"
                    letter="Undo"
                    laneaction="PopResultSetsOutRoad"
                    destination="UndoItemListAction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="ShowItemListCanceled"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="InventorySelected"
                    letter="Inventory"
                    destination="InventoryStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="AutoRelatedItemsSelected"
                    letter="AUTO"
                    laneaction="GetItemRoad"
                    destination="DisplayAutoRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="CrossSellRelatedItemsSelected"
                    letter="CROSSSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayCrossSellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="UpsellRelatedItemsSelected"
                    letter="UPSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayUpsellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="SubstitutionRelatedItemsSelected"
                    letter="SUBSTITUTE"
                    laneaction="GetItemRoad"
                    destination="DisplaySubstituteRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="SearchInWebStore"
                    letter="WebStore"
                    laneaction="SetSearchInWebStoreRoad"
                    destination="SearchItemInLocalOrWebStore"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="FilterSearchResults"
                    letter="FilterResults"
                    laneaction="FilterSearchResultsRoad"
                    destination="ShowFilterItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="UndoItemListAction" siteaction="UndoItemListActionSite">
                <ROAD
                    name="UndoItemListRoad"
                    letter="ItemList"
                    destination="ShowItemList"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                    <COMMENT>
                        This road is traversed when the operator selects Undo while viewing
                        a filtered search result list of items and there's more results.
                    </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoItemSearchRoad"
                    letter="AdvanceSearch"
                    destination="ShowItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                    <COMMENT>
                        This road is traversed when the operator selects Undo after
                        viewing a list of search results generated from an advanced
                        search (ITEM_INFO screen) and there are no more results.
                    </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoItemSearchRoad"
                    letter="Search"
                    destination="PriceInquiry"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                    <COMMENT>
                        This road is traversed when the operator selects Undo after
                        viewing a list of search results generated from an advance
                        inquiry )and there are no more results.
                    </COMMENT>
                </ROAD>
            </SITE>
            <SITE  name="GetAgeRestrictedDOB" siteaction="GetAgeRestrictionDOBSite">
                <ROAD
                    name="DOBNotNeeded"
                    letter="Continue"
                    destination="CheckItemType"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DOBNeeded"
                    letter="Next"
                    destination="ValidateAgeRestrictedDOB"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="DOBSkip"
                    letter="Skip"
                    destination="CheckItemType"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DOBCancel"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DOBUndo"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DOBInvalid"
                    letter="Invalid"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
            </SITE>
            <SITE name="ValidateAgeRestrictedDOB" siteaction="ValidateAgeRestrictedDOBSite">
                 <ROAD
                    name="OldEnough"
                    letter="Continue"
                    destination="CheckItemType"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="NotOldEnough"
                    letter="Invalid"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="CheckItemType" siteaction="CheckItemTypeSite">
                <ROAD
                    name="ItemType"
                    letter="Add"
                    destination="CheckPriceEntry"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GiftCardIssued"
                    letter="Continue"
                    destination="CheckPriceEntry"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GiftCardType"
                    letter="GiftCard"
                    destination="IssueGiftCardStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="AlterationType"
                    letter="Alterations"
                    destination="AlterationStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                    <COMMENT>
                        This road is traversed when an alteration item is
                        entered in the showsalescreen
                    </COMMENT>
                </ROAD>
            </SITE>
            <!-- Introducing filtering item search functionality flow-->
            <SITE  name="ShowItem" siteaction="MAXShowItemSite">
                 <ROAD
                    name="ItemInfoEntered"
                    letter="Next"
                    laneaction="MAXItemInfoEnteredRoad"
                    destination="PriceInquiry"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <!-- <ROAD
                    name="ItemInfoUndo"
                    letter="Undo"
                    destination="AdvanceSearch"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ItemInfoCancel"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD name="ValidateItemNumber" 
					  letter="Search"
					  destination="ValidateItemInfo"
					  laneaction="MAXAnotherItemNumberEnteredRoad"
					  tape="ADVANCE" 
					  record="OFF" 
					  index="ON">
					  
				</ROAD> -->
				<ROAD name="ItemInfoEntered" letter="Next" laneaction="InquiryDoneAisle"
					destination="Final" tape="ADVANCE" record="OFF" index="ON">
					 <!-- <LIGHT signal="MAXIsNotRedirectToSellItemSignal" /> -->
				</ROAD>
				<!-- <ROAD name="InquiryDone" letter="Next" laneaction="InquiryDoneAisle"
					destination="Final" tape="ADVANCE" record="OFF" index="OFF">
					<LIGHT signal="MAXIsRedirectToSellItemSignal" />
				</ROAD> -->

				<ROAD name="ValidateItemNumber" 
					  letter="Search"
					  destination="ValidateItemInfo"
					  laneaction="MAXAnotherItemNumberEnteredRoad"
					  tape="ADVANCE" 
					  record="OFF" 
					  index="ON">
					  
				</ROAD>
				<ROAD
                    name="ShowItemUndo"
                    letter="Undo"
                    laneaction="ResetCargoRoad"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD> 
				<ROAD name="ItemInfoCancel" letter="Cancel" laneaction="ResetCargoRoad"
					destination="Final" tape="ADVANCE" record="OFF" index="OFF">
				</ROAD>
				<ROAD name="AnotherSearch" letter="Search" laneaction="MAXItemInfoEnteredRoad"
					destination="ValidateItemInfo" tape="ADVANCE" record="OFF" index="OFF">
				</ROAD>
				<ROAD name="ShowItemUndo" letter="Undo" laneaction="ResetCargoRoad"
					destination="PriceInquiry" tape="ADVANCE" record="OFF" index="OFF">
				</ROAD>
				<ROAD name="ShowItemCanceled" letter="Cancel" laneaction="ResetCargoRoad"
					destination="Final" tape="ADVANCE" record="OFF" index="OFF">
				</ROAD>
				<ROAD name="ItemToBeAdded" letter="Add" laneaction="AddItemRoad"
					destination="GetAgeRestrictedDOB" tape="ADVANCE" record="OFF"
					index="OFF">
					<LIGHT signal="MAXIsItemToBeAddedSignal" />
				</ROAD>
				<!-- <ROAD name="ItemNotToBeAdded" letter="Add" destination="MultipleMRPStation"
					tape="ADVANCE" record="OFF" index="OFF">
					<LIGHT signal="IsItemNotToBeAddedSignal" />
				</ROAD> -->
            </SITE>
            <SITE  name="ShowFilterItem" siteaction="ShowFilterItemSite">
                <ROAD
                    name="FilteringEntered"
                    letter="Next"
                    laneaction="MAXItemInfoEnteredRoad"
                    destination="ValidateItemInfo"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="FilteringUndoEntered"
                    letter="Undo"
                    laneaction="MAXItemInfoEnteredRoad"
                    destination="ShowItemList"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="FilterItemResultsCanceled"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE name="DisplayItem" siteaction="DisplayItemSite">
                <ROAD
                    name="ItemToBeAdded"
                    letter="Add"
                    laneaction="GetItemRoad"
                    destination="ItemSelected"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="AnotherSearch"
                    letter="Search"
                    laneaction="LocalSearchItemInfoEnteredRoad"
                    destination="ValidateItemInfo"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ShowItemUndo"
                    letter="Undo"
                    destination="UndoDisplayItemAction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
               <ROAD
                    name="InquiryDone"
                    letter="Next"
                    laneaction="InquiryDoneAisle"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="AddItemCanceled"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="InventorySelected"
                    letter="Inventory"
                    destination="InventoryStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InquiryTimeOut"
                    letter="Timeout"
                    laneaction="InquiryDoneAisle"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <AISLE
                    name="RequestTicketSelected"
                    letter="RequestTicket"
                    laneaction="RequestTicketAisle">
                </AISLE>
                <ROAD
                    name="AutoRelatedItemsSelected"
                    letter="AUTO"
                    laneaction="GetItemRoad"
                    destination="DisplayAutoRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="CrossSellRelatedItemsSelected"
                    letter="CROSSSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayCrossSellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="UpsellRelatedItemsSelected"
                    letter="UPSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayUpsellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="SubstitutionRelatedItemsSelected"
                    letter="SUBSTITUTE"
                    laneaction="GetItemRoad"
                    destination="DisplaySubstituteRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
            </SITE>
            <SITE  name="UndoDisplayItemAction" siteaction="UndoDisplayItemActionSite">
                <ROAD
                    name="UndoActionUndo"
                    letter="Undo"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                    <COMMENT>
                        This road is traversed when the operator selects Undo after
                        selecting a recommended item from the sell item screeen. 
                    </COMMENT>
                <ROAD
                    name="UndoActionItemList"
                    letter="ItemList"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF"
                    destination="ShowItemList">
                    <COMMENT >
                        This road is traversed when the operator selects Undo after
                        viewing an item from a search result list or filter of such list.
                    </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoActionSearch"
                    letter="Search"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF"
                    destination="PriceInquiry">
                    <COMMENT>
                        This road is traversed when the operator selects Undo after
                        performing a price inquiry.
                    </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoActionAdvSearch"
                    letter="AdvanceSearch"
                    laneaction="ResetCargoRoad"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF"
                    destination="ShowItem">
                    <COMMENT>
                        This road is traversed when the operator selects Undo after
                        performing an advance search query and search result has only one 
                        item
                    </COMMENT>
                </ROAD>
            </SITE>
            <SITE  name="ItemSelected" siteaction="ItemSelectedSite">
                <ROAD
                    name="GetItemSucess"
                    letter="Success"
                    destination="GetAgeRestrictedDOB"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GetItemCanceled"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="AddItem" siteaction="AddItemSite">
                <ROAD
                    name="ItemAdded"
                    letter="Add"
                    laneaction="CreateTransactionRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="ItemReturned"
                    letter="Next"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GiftCard"
                    letter="GiftCard"
                    destination="IssueGiftCardStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="CheckUnitOfMeasure" siteaction="CheckUnitOfMeasureSite">
                <MOCKUP
                    image=""/>
                <AISLE
                    name="UOMEntered"
                    letter="Next"
                    laneaction="UnitOfMeasureEnteredAisle">
                </AISLE>
                <ROAD
                    name="UOMRetry"
                    letter="Loop"
                    destination="CheckUnitOfMeasure"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UOMItemContinue"
                    letter="Continue"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UOMItemAdd"
                    letter="Add"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="UndoUOM"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UnitOfMeasureCanceled"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="ItemGiftCard"
                    letter="GiftCard"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="CheckPriceEntry" siteaction="CheckPriceEntrySite">
                <AISLE
                    name="PriceEntered"
                    letter="Next"
                    laneaction="PriceEnteredItemInquiryAisle">
                </AISLE>
                <ROAD
                    name="CheckPriceEntryGiftCard"
                    letter="GiftCard"
                    destination="CheckUnitOfMeasure"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CheckPriceEntryContinue"
                    letter="Continue"
                    destination="CheckUnitOfMeasure"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="AddPrice"
                    letter="Add"
                    destination="CheckUnitOfMeasure"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="UndoPriceEntry"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="PriceEntryCanceled"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="DisplayAutoRelatedItems" siteaction="DisplayAutoRelatedItemSite">
                <ROAD
                    name="AutoRelatedItemsSelected"
                    letter="AUTO"
                    laneaction="GetItemRoad"
                    destination="DisplayAutoRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CrossSellRelatedItemsSelected"
                    letter="CROSSSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayCrossSellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UpsellRelatedItemsSelected"
                    letter="UPSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayUpsellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="SubstitutionRelatedItemsSelected"
                    letter="SUBSTITUTE"
                    laneaction="GetItemRoad"
                    destination="DisplaySubstituteRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DisplayRelatedItemsUndoSelected"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>

            <SITE  name="DisplayCrossSellRelatedItems" siteaction="DisplayCrossSellRelatedItemSite">
                <ROAD
                    name="AutoRelatedItemsSelected"
                    letter="AUTO"
                    laneaction="GetItemRoad"
                    destination="DisplayAutoRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CrossSellRelatedItemsSelected"
                    letter="CROSSSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayCrossSellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UpsellRelatedItemsSelected"
                    letter="UPSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayUpsellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="SubstitutionRelatedItemsSelected"
                    letter="SUBSTITUTE"
                    laneaction="GetItemRoad"
                    destination="DisplaySubstituteRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DisplayRelatedItemsUndoSelected"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="DisplayUpsellRelatedItems" siteaction="DisplayUpsellRelatedItemSite">
                <ROAD
                    name="AutoRelatedItemsSelected"
                    letter="AUTO"
                    laneaction="GetItemRoad"
                    destination="DisplayAutoRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CrossSellRelatedItemsSelected"
                    letter="CROSSSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayCrossSellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UpsellRelatedItemsSelected"
                    letter="UPSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayUpsellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="SubstitutionRelatedItemsSelected"
                    letter="SUBSTITUTE"
                    laneaction="GetItemRoad"
                    destination="DisplaySubstituteRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DisplayRelatedItemsUndoSelected"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="DisplaySubstituteRelatedItems" siteaction="DisplaySubstituteRelatedItemSite">
                <ROAD
                    name="AutoRelatedItemsSelected"
                    letter="AUTO"
                    laneaction="GetItemRoad"
                    destination="DisplayAutoRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CrossSellRelatedItemsSelected"
                    letter="CROSSSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayCrossSellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UpsellRelatedItemsSelected"
                    letter="UPSELL"
                    laneaction="GetItemRoad"
                    destination="DisplayUpsellRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="SubstitutionRelatedItemsSelected"
                    letter="SUBSTITUTE"
                    laneaction="GetItemRoad"
                    destination="DisplaySubstituteRelatedItems"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="DisplayRelatedItemsUndoSelected"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <STATION
                name="IssueGiftCardStation"
                servicename="giftcard.issue.issue"
                targettier="CURRENTTIER"
                launchshuttle="GiftCardIssueLaunchShuttle"
                returnshuttle="GiftCardIssueReturnShuttle">
                <AISLE
                    name="GiftCardIssued"
                    letter="Continue"
                    laneaction="GiftCardAddLetterConversionAisle">
                </AISLE>
                <ROAD
                    name="ContinueIssueCard"
                    letter="Add"
                    laneaction="CreateTransactionRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GiftCardUndoSelected"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GiftCardCancelSelected"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="AlterationStation"
                servicename="services.alterations.alterations"
                targettier="CURRENTTIER"
                launchshuttle="AlterationsLaunchShuttle"
                returnshuttle="AlterationsReturnShuttle">
                <ROAD
                    name="AlterationsCompletedNext"
                    letter="Next"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="AlterationsCompletedContinue"
                    letter="Continue"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoAlterations"
                    letter="Undo"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelAlterations"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelAlterationsNoCustomer"
                    letter="No"
                    laneaction="ResetCargoRoad"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="GiftCodeStation"
                servicename="giftreceipt.inquiry.giftreceiptinquiry"
                targettier="CURRENTTIER">
                <ROAD
                    name="GiftReceiptInquirySucceded"
                    letter="Next"
                    tape="ADVANCE"    record="OFF" index="OFF"
                    destination="Final">
                </ROAD>
                <ROAD
                    name="GiftReceiptInquiryFailed"
                    letter="Failure"
                    tape="REWIND"    record="OFF" index="OFF"
                    destination="LastIndexed">
                </ROAD>
                <ROAD
                    name="GiftReceiptInquiryCancelSelected"
                    letter="Cancel"
                    tape="ADVANCE"    record="OFF" index="OFF"
                    destination="Final">
                </ROAD>
                <ROAD
                    name="GiftReceiptInquiryUndoSelected"
                    letter="Undo"
                    tape="REWIND"    record="OFF" index="OFF"
                    destination="LastIndexed">
                </ROAD>
            </STATION>
            <STATION
            name="InventoryStation"
            servicename="services.inventoryinquiry.inventoryinquiry"
            targettier="CURRENTTIER"
            launchshuttle="InventoryInquiryLaunchShuttle"
            returnshuttle="InventoryInquiryReturnShuttle">
                <ROAD
                    name="InventoryUndo"
                    letter="Undo"
                    laneaction="ResetCargoRoad"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InventoryRetry"
                    letter="Retry"
                    laneaction="ResetCargoRoad"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InventoryDone"
                    letter="Done"
                    laneaction="ResetCargoRoad"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InventoryNewSearch"
                    letter="NewSearch"
                    laneaction="ResetCargoRoad"
                    destination="PriceInquiry"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="InventoryDone"
                    letter="Cancel"
                    laneaction="ResetCargoRoad"
                    destination="LastIndexed"
                    tape="REWIND"
                    record="OFF"
                    index="ON">
                </ROAD>

            </STATION>
            <SYSTEMSITE  name="Final" action="RETURN"/>
            <SYSTEMSITE  name="LastIndexed" action="BACKUP"/>
            <SYSTEMSITE  name="NamedIndex" action="BACKUP"/>
        </REGION>
    </MAP>
</SERVICE>
